<!-- Adapted from https://www.evl.uic.edu/aej/424/ -->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>CS CS5331-004 Students</title>
      <script src="https://d3js.org/d3.v4.js"></script>
      <style>
          td{
              text-align: center;
          }
          table{
              border-collapse: collapse;
          }
          #Maintable td.top{
            vertical-align: top;
          }
          .avatar{
            object-position: center;
          }
          .crop{
            width: 90px;
            height: 90px;
            overflow: hidden;
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
          }
      </style>
  </head>
  <body bgcolor="white" text="black">
    
    <div align="left"><font style="font-family:
        Helvetica,Arial,sans-serif;" color="black" size="5">Enrolled Students:</font></div>
        <div align="left"><font style="font-family:
        Helvetica,Arial,sans-serif;" color="black" size="3">The table lists all students for this class (Simple Student Profile)</font></div>

    <table style="width:90%;" id="Maintable">
      <tr>

      </tr>
    </table>

    <hr style="width: 100%; height: 1px;">
      <div align="right"><font style="font-family:
        Helvetica,Arial,sans-serif;" color="black" size="2">&copy; Last revised: Feb 6, 2018  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div>
     
    </ul>
     <script>
         function maketable(table,i, t) {
           var tr = document.createElement("tr");

           var index = document.createElement('td')
           var index_text = document.createTextNode(i + 1);
           index.appendChild(index_text);

           var photocontainertd = document.createElement("td");
           var photocontainer = document.createElement('div');
           photocontainertd.appendChild(photocontainer);
           photocontainer.setAttribute('class','crop');

           photocontainer.style['background-image']= `url('photos/${t.Photoname}')`;



           var fullname = document.createElement("td");
           var fullname_text = document.createTextNode(t.Fullname);
           fullname.appendChild(fullname_text);

           var program = document.createElement("td");
           var program_text = document.createTextNode(t.Program);
           program.appendChild(program_text);

           var level = document.createElement("td");
           var level_text = document.createTextNode(t.Level);
           level.appendChild(level_text);


           var experience = document.createElement("td");
           var experience_text = document.createTextNode(t.ProgrammingYears);
           experience.appendChild(experience_text);


           //var email = document.createElement("td");
           //var email_text = document.createTextNode(t.Email);
           //email.appendChild(email_text);

           var github = document.createElement("td");
           var github_text = document.createTextNode(t.ResearchInterest)
           github.appendChild(github_text);

           tr.appendChild(index);
           tr.appendChild(photocontainertd);
           tr.appendChild(fullname);
           tr.appendChild(program);
           //tr.appendChild(level);
           tr.appendChild(experience);
           //tr.appendChild(email);
           //tr.appendChild(github);
           table.appendChild(tr);
         }

         d3.csv('grade/data/Students.csv',function (data) {
    data.forEach(function (t,i) {
      let tableid = Math.floor(i/14);
      let table = document.getElementById("targettable"+tableid);
      if(!table){
        let td = document.createElement('td');
        td.setAttribute('class','top')
        td.innerHTML =`<table id="${"targettable"+tableid}" style="width: 96%;" border="1" cellpadding="0" cellspacing="0">
            <tbody style="text-align:center">
            <tr bgcolor="#aaa">
              <td>No</td>
              <td>Photo</td>
              <td>Full Name</td>
              <td>Program</td>
              <!--<td>Level of Education</td>-->
              <td>Experience (Yrs)</td>
              <!--<td>Email</td>-->
              <!--<td>Web Links</td>-->
            </tr>
            </tbody>
          </table>`;
        table = td.querySelector('table')
        document.getElementById('Maintable').querySelector('tr').appendChild(td);
      }
      maketable(table,i, t);
    })
})

     </script>
  </body>
</html>
